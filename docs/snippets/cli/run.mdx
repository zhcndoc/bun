# CLI 用法

```bash
bun run <文件或脚本>
```

### 常规执行选项

<ParamField path="--silent" type="boolean">
  不打印脚本命令
</ParamField>

<ParamField path="--if-present" type="boolean">
  如果入口点不存在，则退出且不报错
</ParamField>

<ParamField path="--eval" type="string">
  将参数作为脚本执行。别名：<code>-e</code>
</ParamField>

<ParamField path="--print" type="string">
  将参数作为脚本执行并打印结果。别名：<code>-p</code>
</ParamField>

<ParamField path="--help" type="boolean">
  显示此菜单后退出。别名：<code>-h</code>
</ParamField>

### 工作空间管理

<ParamField path="--elide-lines" type="number" default="10">
  使用 --filter 时显示的脚本输出行数（默认：10）。设置为 0 显示所有行
</ParamField>

<ParamField path="--filter" type="string">
  在匹配该模式的所有工作空间包中运行脚本。别名：<code>-F</code>
</ParamField>

<ParamField path="--workspaces" type="boolean">
  在所有工作空间包（来自 <code>package.json</code> 中的 <code>workspaces</code> 字段）中运行脚本
</ParamField>

### 运行时及进程控制

<ParamField path="--bun" type="boolean">
  强制脚本或包使用 Bun 运行时而非 Node.js（通过软链接 node）。别名：<code>-b</code>
</ParamField>

<ParamField path="--shell" type="string">
  控制 <code>package.json</code> 脚本所用的 shell，支持 <code>bun</code> 或 <code>system</code>
</ParamField>

<ParamField path="--smol" type="boolean">
  使用更少内存，但更频繁地进行垃圾回收
</ParamField>

<ParamField path="--expose-gc" type="boolean">
  在全局对象上暴露 <code>gc()</code>。对 <code>Bun.gc()</code> 无影响
</ParamField>

<ParamField path="--no-deprecation" type="boolean">
  抑制所有自定义弃用警告
</ParamField>

<ParamField path="--throw-deprecation" type="boolean">
  决定弃用警告是否导致错误
</ParamField>

<ParamField path="--title" type="string">
  设置进程标题
</ParamField>

<ParamField path="--zero-fill-buffers" type="boolean">
  强制 <code>Buffer.allocUnsafe(size)</code> 填充为零
</ParamField>

<ParamField path="--no-addons" type="boolean">
  调用 <code>process.dlopen</code> 时抛出错误，并禁用导出条件 <code>node-addons</code>
</ParamField>

<ParamField path="--unhandled-rejections" type="string">
  以下之一：<code>strict</code>、<code>throw</code>、<code>warn</code>、<code>none</code>，或{" "}
  <code>warn-with-error-code</code>
</ParamField>

<ParamField path="--console-depth" type="number" default="2">
  设置 <code>console.log</code> 对象检查的默认深度（默认：2）
</ParamField>

### 开发工作流

<ParamField path="--watch" type="boolean">
  文件变更时自动重启进程
</ParamField>

<ParamField path="--hot" type="boolean">
  在 Bun 运行时、测试运行器或打包器中启用自动重载
</ParamField>

<ParamField path="--no-clear-screen" type="boolean">
  在启用 --hot 或 --watch 时，禁止重新加载时清屏
</ParamField>

### 调试

<ParamField path="--inspect" type="string">
  激活 Bun 的调试器
</ParamField>

<ParamField path="--inspect-wait" type="string">
  激活 Bun 的调试器，执行前等待连接
</ParamField>

<ParamField path="--inspect-brk" type="string">
  激活 Bun 的调试器，在代码第一行设置断点并等待
</ParamField>

### 依赖与模块解析

<ParamField path="--preload" type="string">
  在其他模块加载之前导入模块。别名：<code>-r</code>
</ParamField>

<ParamField path="--require" type="string">
  --preload 别名，为 Node.js 兼容性设计
</ParamField>

<ParamField path="--import" type="string">
  --preload 别名，为 Node.js 兼容性设计
</ParamField>

<ParamField path="--no-install" type="boolean">
  禁用 Bun 运行时自动安装
</ParamField>

<ParamField path="--install" type="string" default="auto">
  配置自动安装行为。值为 <code>auto</code>（默认，node_modules 不存在时自动安装），{" "}
  <code>fallback</code>（缺失包时安装），<code>force</code>（始终安装）
</ParamField>

<ParamField path="-i" type="boolean">
  执行时自动安装依赖。等同于 --install=fallback
</ParamField>

<ParamField path="--prefer-offline" type="boolean">
  跳过 Bun 运行时中的包陈旧检查，优先从磁盘解析
</ParamField>

<ParamField path="--prefer-latest" type="boolean">
  使用最新匹配版本包，始终检查 npm
</ParamField>

<ParamField path="--conditions" type="string">
  传递自定义条件以进行解析
</ParamField>

<ParamField path="--main-fields" type="string">
  在 <code>package.json</code> 中查找的主要字段，默认依赖于 --target
</ParamField>

<ParamField path="--preserve-symlinks" type="boolean">
  解析文件时保留符号链接
</ParamField>

<ParamField path="--preserve-symlinks-main" type="boolean">
  解析主入口点时保留符号链接
</ParamField>

<ParamField path="--extension-order" type="string" default=".tsx,.ts,.jsx,.js,.json">
  默认值：<code>.tsx,.ts,.jsx,.js,.json</code>
</ParamField>

### 转译与语言特性

<ParamField path="--tsconfig-override" type="string">
  指定自定义 <code>tsconfig.json</code>，默认 <code>$cwd/tsconfig.json</code>
</ParamField>

<ParamField path="--define" type="string">
  解析时替换 K:V，例如 <code>--define process.env.NODE_ENV:"development"</code>。值以 JSON 格式解析。别名：<code>-d</code>
</ParamField>

<ParamField path="--drop" type="string">
  移除函数调用，例如 <code>--drop=console</code> 会移除所有 <code>console.*</code> 调用
</ParamField>

<ParamField path="--loader" type="string">
  通过 <code>.ext:loader</code> 解析文件，例如 <code>--loader .js:jsx</code>。有效的加载器包括 <code>js</code>、{" "}
  <code>jsx</code>、<code>ts</code>、<code>tsx</code>、<code>json</code>、<code>toml</code>、<code>text</code>、{" "}
  <code>file</code>、<code>wasm</code>、<code>napi</code>。别名：<code>-l</code>
</ParamField>

<ParamField path="--no-macros" type="boolean">
  禁止在打包器、转译器和运行时执行宏
</ParamField>

<ParamField path="--jsx-factory" type="string">
  改变使用经典 JSX 运行时编译 JSX 元素时调用的函数
</ParamField>

<ParamField path="--jsx-fragment" type="string">
  改变编译 JSX 片段时调用的函数
</ParamField>

<ParamField path="--jsx-import-source" type="string" default="react">
  声明用于导入 jsx 和 jsxs 工厂函数的模块标识符。默认：<code>react</code>
</ParamField>

<ParamField path="--jsx-runtime" type="string" default="automatic">
  <code>automatic</code>（默认）或 <code>classic</code>
</ParamField>

<ParamField path="--jsx-side-effects" type="boolean">
  将 JSX 元素视为具有副作用（禁用纯注释）
</ParamField>

<ParamField path="--ignore-dce-annotations" type="boolean">
  忽略诸如 <code>@__PURE__</code> 的树摇注释
</ParamField>

### 网络与安全

<ParamField path="--port" type="number">
  设置 <code>Bun.serve</code> 的默认端口
</ParamField>

<ParamField path="--fetch-preconnect" type="string">
  加载代码时对 URL 进行预连接
</ParamField>

<ParamField path="--max-http-header-size" type="number" default="16384">
  设置 HTTP 头最大字节数，默认 16KiB
</ParamField>

<ParamField path="--dns-result-order" type="string" default="verbatim">
  设置 DNS 查询结果的默认顺序。有效值：<code>verbatim</code>（默认）、<code>ipv4first</code>、{" "}
  <code>ipv6first</code>
</ParamField>

<ParamField path="--use-system-ca" type="boolean">
  使用系统的受信任证书颁发机构
</ParamField>

<ParamField path="--use-openssl-ca" type="boolean">
  使用 OpenSSL 的默认 CA 存储
</ParamField>

<ParamField path="--use-bundled-ca" type="boolean">
  使用捆绑的 CA 存储
</ParamField>

<ParamField path="--redis-preconnect" type="boolean">
  启动时预连接 <code>$REDIS_URL</code>
</ParamField>

<ParamField path="--sql-preconnect" type="boolean">
  启动时预连接 PostgreSQL
</ParamField>

<ParamField path="--user-agent" type="string">
  设置 HTTP 请求的默认 User-Agent 头
</ParamField>

### 全局配置与上下文

<ParamField path="--env-file" type="string">
  从指定文件加载环境变量
</ParamField>

<ParamField path="--cwd" type="string">
  解析文件 &amp; 入口点的绝对路径。仅更改进程的当前工作目录
</ParamField>

<ParamField path="--config" type="string">
  指定 Bun 配置文件路径。默认 <code>$cwd/bunfig.toml</code>。别名：<code>-c</code>
</ParamField>

## 示例

运行一个 JavaScript 或 TypeScript 文件：

```bash
bun run ./index.js
bun run ./index.tsx
```

运行 package.json 脚本：

```bash
bun run dev
bun run lint
```
