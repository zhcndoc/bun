---
title: 安全扫描器 API
description:
---

Bun 的包管理器可以在安装前扫描包中的安全漏洞，帮助保护您的应用免受供应链攻击和已知漏洞的影响。

---

## 快速开始

在您的 `bunfig.toml` 中配置安全扫描器：

```toml bunfig.toml icon="settings"
[install.security]
scanner = "@acme/bun-security-scanner"
```

配置后，Bun 将会：

- 在安装前扫描所有包
- 显示安全警告和咨询
- 如果发现严重漏洞，取消安装
- 自动禁用安全相关的自动安装

---

## 工作原理

安全扫描器会在执行 `bun install`、`bun add` 及其他包操作时分析包。它们可以检测：

- 已知的安全漏洞（CVE）
- 恶意包
- 许可合规性问题
- ……以及更多！

### 安全级别

扫描器报告两种严重等级的问题：

- **`fatal`** - 立即停止安装，返回非零退出码
- **`warn`** - 在交互式终端中提示是否继续；在 CI 环境中立即退出

---

## 使用预构建扫描器

许多安全公司将 Bun 安全扫描器作为 npm 包发布，您可以立即安装并使用。

### 安装扫描器

从 npm 安装安全扫描器：

```bash terminal icon="terminal"
bun add -d @acme/bun-security-scanner
```

<Note>
  请查阅您所用安全扫描器的文档，了解其具体的包名和安装说明。大多数扫描器通过 `bun add` 方式安装。
</Note>

### 配置扫描器

安装后，在您的 `bunfig.toml` 中进行配置：

```toml bunfig.toml icon="settings"
[install.security]
scanner = "@acme/bun-security-scanner"
```

### 企业配置

一些企业级扫描器可能支持通过环境变量认证和/或配置：

```bash terminal icon="terminal"
# 例如可以放在 ~/.bashrc 中
export SECURITY_API_KEY="your-api-key"

# 扫描器会自动使用这些凭证
bun install
```

请查阅您的安全扫描器文档，了解需要设置哪些环境变量以及是否需要额外配置。

### 自定义扫描器开发

完整的示例（含测试和 CI 配置）请查看官方模板：
[github.com/oven-sh/security-scanner-template](https://github.com/oven-sh/security-scanner-template)

## 相关链接

- [配置 (bunfig.toml)](/runtime/bunfig#install-security-scanner)
- [包管理器](/installation)
- [安全扫描器模板](https://github.com/oven-sh/security-scanner-template)
