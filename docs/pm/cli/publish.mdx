---
title: "bun publish"
description: 使用 `bun publish` 将包发布到 npm 注册表
---

import Publish from "/snippets/cli/publish.mdx";

`bun publish` 会自动将你的包打包成 tarball，去除 `package.json` 中的 catalog 和 workspace 协议（如有必要会解析版本），并发布到配置文件中指定的注册表。支持 `bunfig.toml` 和 `.npmrc` 文件。

```sh terminal icon="terminal"
## 从当前工作目录发布包
bun publish
```

```txt
bun publish v1.3.3 (ca7428e9)

packed 203B package.json
packed 224B README.md
packed 30B index.ts
packed 0.64KB tsconfig.json

Total files: 4
Shasum: 79e2b4377b63f4de38dc7ea6e5e9dbee08311a69
Integrity: sha512-6QSNlDdSwyG/+[...]X6wXHriDWr6fA==
Unpacked size: 1.1KB
Packed size: 0.76KB
Tag: latest
Access: default
Registry: http://localhost:4873/

 + publish-1@1.0.0
```

或者，你也可以先用 `bun pm pack` 单独打包你的包，然后用 `bun publish` 指定输出的 tarball 路径进行发布。

```sh terminal icon="terminal"
bun pm pack
...
bun publish ./package.tgz
```

<Note>
  当提供 tarball 路径时，`bun publish` 不会执行生命周期脚本（`prepublishOnly/prepack/prepare/postpack/publish/postpublish`）。只有在由 `bun publish` 打包时才会执行脚本。
</Note>

### `--access`

`--access` 标志可用于设置发布包的访问级别。访问级别可以是 `public` 或 `restricted`。未作用域的包总是公开的，尝试使用 `--access restricted` 发布未作用域包将导致错误。

```sh terminal icon="terminal"
bun publish --access public
```

也可以在 `package.json` 的 `publishConfig` 字段中设置 `--access`。

```json package.json icon="file-json"
{
  "publishConfig": {
    "access": "restricted"
  }
}
```

### `--tag`

设置发布的包版本的标签。默认标签为 `latest`。包的初始版本总是会被打上 `latest` 标签，且会额外打上指定的标签。

```sh terminal icon="terminal"
bun publish --tag alpha
```

也可以在 `package.json` 的 `publishConfig` 字段中设置 `--tag`。

```json package.json icon="file-json"
{
  "publishConfig": {
    "tag": "next"
  }
}
```

### `--dry-run`

`--dry-run` 标志可用于模拟发布过程，而不实际发布包。这对于验证发布包的内容很有用。

```sh terminal icon="terminal"
bun publish --dry-run
```

### `--tolerate-republish`

如果包版本已存在，使用该标志时退出码为 0 而不是 1。在可能重新运行作业的 CI/CD 场景中很有用。

```sh terminal icon="terminal"
bun publish --tolerate-republish
```

### `--gzip-level`

指定打包时使用的 gzip 压缩等级。仅适用于无 tarball 路径参数的 `bun publish`。取值范围为 `0` 到 `9`（默认值为 `9`）。

### `--auth-type`

如果你的 npm 账号启用了两步验证（2FA），`bun publish` 会提示输入一次性密码。该操作既可以通过浏览器，也可以通过 CLI 完成。`--auth-type` 标志用于告诉 npm 注册表你偏好的验证方式。可选值为 `web` 和 `legacy`，默认值是 `web`。

```sh terminal icon="terminal"
bun publish --auth-type legacy
...
This operation requires a one-time password.
Enter OTP: 123456
...
```

### `--otp`

直接向 CLI 提供一次性密码。如果密码有效，将跳过发布前的额外一次性密码提示。示例如下：

```sh terminal icon="terminal"
bun publish --otp 123456
```

<Note>
  `bun publish` 支持 `NPM_CONFIG_TOKEN` 环境变量，可用于 github actions 或自动化工作流中的发布。
</Note>

---

<Publish />
